function generateGoalSettingsModal(goal) {
  const modalContent = document.getElementById("addedGoalSettings");
  modalContent.innerHTML = `
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Selected Goal: ${goal}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class='duration-selector-sec d-flex'>
            <select class="form-select how-long-goal" style="width: 180px" aria-label="Default select example">
              <option value="" selected>Select a duration</option>
              <option value="days">Days</option>
              <option value="weeks">Weeks</option>
              <option value="months">Months</option>
            </select>
          </div>
          <div class='how-many-x-week hide'>
            <label for='howmanyxweek'>How Many Tasks per Week?</label>
            <select id='howmanyxweek' name='howmanyxweek' class='form-select'>
              <option value='1'>1</option>
              <option value='2'>2</option>
              <option value='3'>3</option>
              <option value='4'>4</option>
              <option value='5'>5</option>
            </select>
          </div>
          <div class='task-titles'>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success">Add Goal to Plan</button>
        </div>
      </div>
    </div>
  `;

  const howLongGoalSelect = modalContent.querySelector(".how-long-goal");

  howLongGoalSelect.addEventListener("change", () => {
    const selectedValue = howLongGoalSelect.value;
    let durationSelect = modalContent.querySelector(".how-long-duration");
    
    if (!selectedValue) {
      if (durationSelect) {
        durationSelect.remove();
      }
      return;
    }

    if (!durationSelect) {
      durationSelect = document.createElement("select");
      durationSelect.classList.add("form-select", "how-long-duration");
      durationSelect.style.width = "180px";
      durationSelect.setAttribute("aria-label", "Default select example");
      const durationDiv = document.createElement("div");
      durationDiv.appendChild(durationSelect);
      howLongGoalSelect.parentNode.appendChild(durationDiv);
    }

    let options = [];
    let maxDuration = 0;

    switch (selectedValue) {
      case "days":
        options = ["1", "2", "3", "4", "5"];
        maxDuration = 5;
        break;
      case "weeks":
        options = ["1", "2"];
        maxDuration = 2;
        break;
      case "months":
        options = ["1", "2", "3", "4", "5", "6"];
        maxDuration = 6;
        break;
    }
    durationSelect.innerHTML = `
      <option value="" selected>Select a duration</option>
      ${options.map((option) => `<option value="${option}">${option}</option>`).join("")}
    `;

    const currentDuration = durationSelect.value;
    if (currentDuration > maxDuration) {
    durationSelect.value = "";
    }

    const howManyXWeekSelect = modalContent.querySelector("#howmanyxweek");
const taskTitlesDiv = modalContent.querySelector(".task-titles");

if (selectedValue === "weeks" || "months") {
  // howManyXWeekSelect.parentNode.classList.add("hide");
  howManyXWeekSelect.parentNode.classList.remove("hide");
} else {
  howManyXWeekSelect.parentNode.classList.add("hide");
}

howManyXWeekSelect.addEventListener("change", changeTasksTitles)

function changeTasksTitles () {
  taskTitlesDiv.innerHTML = "";
const selectedValue = howManyXWeekSelect.value;
for (let i = 0; i < selectedValue; i++) {
  const input = document.createElement("input");
  input.classList.add("form-control", "mb-3");
  input.type = "text";
  input.placeholder = `Task ${i + 1}`;
  taskTitlesDiv.appendChild(input);
}
}
  })}